global:
  nameOverride: ""
  fullnameOverride: ""
  namespace: integrated-care

imagePullSecrets: []

config:
  API_HOST: "0.0.0.0"
  API_PORT: "8000"
  API_CACHE_TTL_SECONDS: "30"
  PIPELINE_API_EVENT_PUBLISH_ENABLED: "false"
  PIPELINE_MONITORING_HOST: "0.0.0.0"
  PIPELINE_MONITORING_PORT: "8001"
  PIPELINE_STORE_BACKEND: "jsonl"
  PIPELINE_KAFKA_PUBLISH_ENABLED: "false"
  PIPELINE_PROVIDER_NAME: "seoul_open_data"
  PIPELINE_OUTPUT_FILE: "runtime/facilities.jsonl"
  PIPELINE_PAGE_SIZE: "200"
  PIPELINE_START_PAGE: "1"
  PIPELINE_END_PAGE: "1"

secret:
  create: true
  REDIS_URL: "redis://redis-master:6379/0"
  DATABASE_URL: ""
  KAFKA_BOOTSTRAP_SERVERS: "kafka:9092"
  FACILITY_PROVIDER_BASE_URL: "https://provider.example.com"

api:
  enabled: true
  replicaCount: 2
  image:
    repository: ghcr.io/example/integrated-care-api
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 80
    targetPort: 8000
  resources:
    requests:
      cpu: "200m"
      memory: "256Mi"
    limits:
      cpu: "1"
      memory: "1Gi"
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 20
    averageCpuUtilization: 65

apiEventConsumer:
  enabled: false
  replicaCount: 1
  image:
    repository: ghcr.io/example/integrated-care-api
    tag: latest
    pullPolicy: IfNotPresent
  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

pipelineMonitoring:
  enabled: true
  replicaCount: 1
  image:
    repository: ghcr.io/example/integrated-care-pipeline
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 80
    targetPort: 8001
  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

etlCronJob:
  enabled: true
  schedule: "0 2 * * *"
  concurrencyPolicy: Forbid
  successfulJobsHistoryLimit: 2
  failedJobsHistoryLimit: 3
  image:
    repository: ghcr.io/example/integrated-care-pipeline
    tag: latest
    pullPolicy: IfNotPresent
  resources:
    requests:
      cpu: "150m"
      memory: "256Mi"
    limits:
      cpu: "1"
      memory: "1Gi"

serviceMonitor:
  enabled: true
  interval: 15s

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: integrated-care.local
      paths:
        - path: /
          pathType: Prefix
          serviceName: api
          servicePort: 80
  tls: []

dependencies:
  postgresql:
    enabled: false
  redis:
    enabled: true
  kafka:
    enabled: true
  kubePrometheusStack:
    enabled: false
  airflow:
    enabled: false

postgresql:
  auth:
    username: postgres
    password: postgres
    database: integrated_care
