imagePullSecrets:
  - name: dockerhub-pull

deploymentMode: development

global:
  storageClass: jonathan-system-sc

serviceMonitor:
  enabled: false

migrations:
  enabled: true

dependencies:
  postgresql:
    enabled: true
  kubePrometheusStack:
    enabled: false
  airflow:
    enabled: true

airflow:
  config:
    api:
      auth_backends: airflow.api.auth.backend.basic_auth,airflow.api.auth.backend.session
  data:
    metadataSecretName: integrated-care-airflow-shared-metadata
    brokerUrlSecretName: integrated-care-airflow-shared-broker-url
  images:
    redis:
      repository: bitnamilegacy/redis
      tag: 7.4.2-debian-12-r0
  scheduler:
    extraVolumes:
      - name: admin-pipeline-dag
        configMap:
          name: integrated-care-airflow-admin-dags
    extraVolumeMounts:
      - name: admin-pipeline-dag
        mountPath: /opt/airflow/dags/admin_pipeline_dag.py
        subPath: admin_pipeline_dag.py
        readOnly: true
  webserver:
    service:
      type: NodePort
      ports:
        - name: airflow-ui
          port: 8080
          targetPort: airflow-ui
          nodePort: 32080
    extraVolumes:
      - name: admin-pipeline-dag
        configMap:
          name: integrated-care-airflow-admin-dags
    extraVolumeMounts:
      - name: admin-pipeline-dag
        mountPath: /opt/airflow/dags/admin_pipeline_dag.py
        subPath: admin_pipeline_dag.py
        readOnly: true
  workers:
    persistence:
      storageClassName: jonathan-system-sc
  triggerer:
    persistence:
      storageClassName: jonathan-system-sc
  logs:
    persistence:
      storageClassName: jonathan-system-sc
  dags:
    persistence:
      storageClassName: jonathan-system-sc
  redis:
    enabled: false
  postgresql:
    enabled: false

apiEventConsumer:
  enabled: true
apiEventDlqRetryWorker:
  enabled: true
apiEventParkingMonitorWorker:
  enabled: true

etlCronJob:
  enabled: false

kafkaTopicProvisioner:
  enabled: false

secret:
  JWT_SECRET_KEY: "local-dev-jwt-secret-change-me-2026"
  ENCRYPTION_MASTER_KEY: "local-dev-encryption-key-change-me-2026"
  INTERNAL_EVENT_HMAC_SECRET: "local-dev-hmac-secret-change-me-2026"
  FACILITY_PROVIDER_BASE_URL: "https://provider.example.com"
  AIRFLOW_API_BASE_URL: "http://integrated-care-webserver:8080"
  AIRFLOW_API_USERNAME: "admin"
  AIRFLOW_API_PASSWORD: "admin"
  AIRFLOW_DAG_ID: "seoul_care_plus_daily_sync"

api:
  service:
    type: NodePort
    nodePort: 30080
  image:
    repository: registry.jonathan.acryl.ai/wyatt/integrated-care-api
    tag: "local-20260216-authgw01"
authService:
  service:
    type: NodePort
    nodePort: 30101
  image:
    repository: registry.jonathan.acryl.ai/wyatt/integrated-care-auth-service
    tag: "local-20260216-safealembic01"
userService:
  image:
    repository: registry.jonathan.acryl.ai/wyatt/integrated-care-user-service
    tag: "local-20260216-userbackfill01"
facilityService:
  image:
    repository: registry.jonathan.acryl.ai/wyatt/integrated-care-facility-service
    tag: "local-20260216-safealembic01"
searchService:
  image:
    repository: registry.jonathan.acryl.ai/wyatt/integrated-care-search-service
    tag: "local-20260216-safealembic01"
adminService:
  service:
    type: NodePort
    nodePort: 30105
  image:
    repository: registry.jonathan.acryl.ai/wyatt/integrated-care-admin-service
    tag: "local-20260216-pipelineadmin01"
apiEventConsumer:
  image:
    repository: registry.jonathan.acryl.ai/wyatt/integrated-care-api-event-consumer
    tag: "local-20260216-kst01"
apiEventDlqRetryWorker:
  image:
    repository: registry.jonathan.acryl.ai/wyatt/integrated-care-api-event-dlq-retry
    tag: "local-20260216-kst01"
apiEventParkingMonitorWorker:
  image:
    repository: registry.jonathan.acryl.ai/wyatt/integrated-care-api-event-parking-monitor
    tag: "local-20260216-kst01"
etlCronJob:
  image:
    repository: registry.jonathan.acryl.ai/wyatt/integrated-care-pipeline-etl
    tag: "local-20260216-pipelineadmin01"
pipelineMonitoring:
  image:
    repository: registry.jonathan.acryl.ai/wyatt/integrated-care-pipeline-monitoring
    tag: "local-20260216-pipelineadmin01"

postgresql:
  primary:
    extendedConfiguration: |
      timezone = 'Asia/Seoul'
      log_timezone = 'Asia/Seoul'
    extraEnvVars:
      - name: TZ
        value: Asia/Seoul
      - name: PGTZ
        value: Asia/Seoul
    persistence:
      storageClass: jonathan-system-sc
    service:
      type: NodePort
      nodePorts:
        postgresql: "30432"

redis:
  master:
    service:
      type: NodePort
      nodePorts:
        redis: "30379"
    persistence:
      storageClass: jonathan-system-sc
  replica:
    service:
      type: ClusterIP
    persistence:
      storageClass: jonathan-system-sc

kafka:
  persistence:
    storageClass: jonathan-system-sc
  controller:
    persistence:
      storageClass: jonathan-system-sc
  broker:
    persistence:
      storageClass: jonathan-system-sc
